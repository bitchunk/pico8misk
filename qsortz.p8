pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
--qsortz v0.1
--@shiftalow / bitchunk

--[[
	- qsortz       			  -- quick sort by z.
	- @param  table  v  -- table containing z.
	- @param  number s  -- start index:specify 1.
	- @param  number e  -- end index:specify the number of table elements.
	- @description
		-- sorts by reference to z from the argument table.
]]--

----
function qsortz(v,s,e)
 if s < e then
  local p=s
  for i=s+1,e do
   if v[i].z<v[s].z then --asc
--   if v[i].z>v[s].z then --desc
    p+=1
    v[p],v[i]=v[i],v[p]
   end
  end
  v[s],v[p]=v[p],v[s]

  qsortz(v,s,p-1)
  qsortz(v,p+1,e)
 end
end

-- single value version
-- table t is sorted by v.
function qsort(v,s,e,t)
 if s < e then
  local p=s
  for i=s+1,e do
   if v[i]<v[s] then --asc
--   if v[i]>v[s] then --desc
    p+=1
    for v in all({v,t or {}}) do
	    v[p],v[i]=v[i],v[p]
    end
   end
  end
  for v in all({v,t or {}}) do
		 v[s],v[p]=v[p],v[s]
  end

  qsort(v,s,p-1,t)
  qsort(v,p+1,e,t)
 end
end

cls()

?'\|hâ˜…\^tquick sort',7
?'\nz contain type',11
tb={{id='a', z=1}, {id='b', z=2}, {id='c', z=1.5}, {id='d', z=-0.5}}

?'before sort',6
for i,v in pairs(tb) do
	?v.id..':'..v.z
end

qsortz(tb,1,#tb)

?'\nafter sort'
for i,v in pairs(tb) do
	?v.id..':'..v.z
end

?'\^t\|h',60,0,12
?'\n\nsingle value type'
tbz={1,2,1.5,-0.5}
ids={'a','b','c','d'}

?'before sort',6
for i,v in pairs(tbz) do
	?ids[i]..':'..v
end

qsort(tbz,1,#tbz,ids)

?'\nafterr sort'
for i,v in pairs(tbz) do
	?ids[i]..':'..v
end

-->8
--[[
update history
**v0.1**
	- first release
]]--

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00070000070070707770077070700000077007707770777000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777000070070707770077070700000077007707770777000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777770707070700700700070700000700070707070070000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777700707070700700700070700000700070707070070000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000700707070700700700077000000777070707700070000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000707070700700700077000000777070707700070000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000770070700700700070700000007070707070070000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000770070700700700070700000007070707070070000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077007707770077070700000770077007070070000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000077007707770077070700000770077007070070000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
bbb000000bb00bb0bb00bbb0bbb0bbb0bb000000bbb0b0b0bbb0bbb000000cc0ccc0cc000cc0c000ccc00000c0c0ccc0c000c0c0ccc00000ccc0c0c0ccc0ccc0
00b00000b000b0b0b0b00b00b0b00b00b0b000000b00b0b0b0b0b0000000c0000c00c0c0c000c000c0000000c0c0c0c0c000c0c0c00000000c00c0c0c0c0c000
0b000000b000b0b0b0b00b00bbb00b00b0b000000b00bbb0bbb0bb000000ccc00c00c0c0c000c000cc000000c0c0ccc0c000c0c0cc0000000c00ccc0ccc0cc00
b0000000b000b0b0b0b00b00b0b00b00b0b000000b0000b0b000b000000000c00c00c0c0c0c0c000c0000000ccc0c0c0c000c0c0c00000000c0000c0c000c000
bbb000000bb0bb00b0b00b00b0b0bbb0b0b000000b00bbb0b000bbb00000cc00ccc0c0c0ccc0ccc0ccc000000c00c0c0ccc00cc0ccc000000c00ccc0c000ccc0
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606660666006606660666000000660066066606660000000000000000066606660666006606660666000000660066066606660000000000000000000000000
60606000600060606060600000006000606060600600000000000000000060606000600060606060600000006000606060600600000000000000000000000000
66006600660060606600660000006660606066000600000000000000000066006600660060606600660000006660606066000600000000000000000000000000
60606000600060606060600000000060606060600600000000000000000060606000600060606060600000000060606060600600000000000000000000000000
66606660600066006060666000006600660060600600000000000000000066606660600066006060666000006600660060600600000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000660000000000000000000000000000000000000000000000000066600000660000000000000000000000000000000000000000000000000000000000
60600600060000000000000000000000000000000000000000000000000060600600060000000000000000000000000000000000000000000000000000000000
66600000060000000000000000000000000000000000000000000000000066600000060000000000000000000000000000000000000000000000000000000000
60600600060000000000000000000000000000000000000000000000000060600600060000000000000000000000000000000000000000000000000000000000
60600000666000000000000000000000000000000000000000000000000060600000666000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000666000000000000000000000000000000000000000000000000066600000666000000000000000000000000000000000000000000000000000000000
60600600006000000000000000000000000000000000000000000000000060600600006000000000000000000000000000000000000000000000000000000000
66000000666000000000000000000000000000000000000000000000000066000000666000000000000000000000000000000000000000000000000000000000
60600600600000000000000000000000000000000000000000000000000060600600600000000000000000000000000000000000000000000000000000000000
66600000666000000000000000000000000000000000000000000000000066600000666000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06600000660000006660000000000000000000000000000000000000000006600000660000006660000000000000000000000000000000000000000000000000
60000600060000006000000000000000000000000000000000000000000060000600060000006000000000000000000000000000000000000000000000000000
60000000060000006660000000000000000000000000000000000000000060000000060000006660000000000000000000000000000000000000000000000000
60000600060000000060000000000000000000000000000000000000000060000600060000000060000000000000000000000000000000000000000000000000
06600000666006006660000000000000000000000000000000000000000006600000666006006660000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000000000066600000666000000000000000000000000000000000000066000000000066600000666000000000000000000000000000000000000000000000
60600600000060600000600000000000000000000000000000000000000060600600000060600000600000000000000000000000000000000000000000000000
60600000666060600000666000000000000000000000000000000000000060600000666060600000666000000000000000000000000000000000000000000000
60600600000060600000006000000000000000000000000000000000000060600600000060600000006000000000000000000000000000000000000000000000
66600000000066600600666000000000000000000000000000000000000066600000000066600600666000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66606660666066606660000006600660666066600000000000000000000066606660666066606660666000000660066066606660000000000000000000000000
60606000060060006060000060006060606006000000000000000000000060606000060060006060606000006000606060600600000000000000000000000000
66606600060066006600000066606060660006000000000000000000000066606600060066006600660000006660606066000600000000000000000000000000
60606000060060006060000000606060606006000000000000000000000060606000060060006060606000000060606060600600000000000000000000000000
60606000060066606060000066006600606006000000000000000000000060606000060066606060606000006600660060600600000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66000000000066600000666000000000000000000000000000000000000066000000000066600000666000000000000000000000000000000000000000000000
60600600000060600000600000000000000000000000000000000000000060600600000060600000600000000000000000000000000000000000000000000000
60600000666060600000666000000000000000000000000000000000000060600000666060600000666000000000000000000000000000000000000000000000
60600600000060600000006000000000000000000000000000000000000060600600000060600000006000000000000000000000000000000000000000000000
66600000000066600600666000000000000000000000000000000000000066600000000066600600666000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000660000000000000000000000000000000000000000000000000066600000660000000000000000000000000000000000000000000000000000000000
60600600060000000000000000000000000000000000000000000000000060600600060000000000000000000000000000000000000000000000000000000000
66600000060000000000000000000000000000000000000000000000000066600000060000000000000000000000000000000000000000000000000000000000
60600600060000000000000000000000000000000000000000000000000060600600060000000000000000000000000000000000000000000000000000000000
60600000666000000000000000000000000000000000000000000000000060600000666000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06600000660000006660000000000000000000000000000000000000000006600000660000006660000000000000000000000000000000000000000000000000
60000600060000006000000000000000000000000000000000000000000060000600060000006000000000000000000000000000000000000000000000000000
60000000060000006660000000000000000000000000000000000000000060000000060000006660000000000000000000000000000000000000000000000000
60000600060000000060000000000000000000000000000000000000000060000600060000000060000000000000000000000000000000000000000000000000
06600000666006006660000000000000000000000000000000000000000006600000666006006660000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
66600000666000000000000000000000000000000000000000000000000066600000666000000000000000000000000000000000000000000000000000000000
60600600006000000000000000000000000000000000000000000000000060600600006000000000000000000000000000000000000000000000000000000000
66000000666000000000000000000000000000000000000000000000000066000000666000000000000000000000000000000000000000000000000000000000
60600600600000000000000000000000000000000000000000000000000060600600600000000000000000000000000000000000000000000000000000000000
66600000666000000000000000000000000000000000000000000000000066600000666000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

